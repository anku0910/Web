<!DOCTYPE html>
<!-- saved from url=(0060)file:///C:/Users/c1348/Documents/GitHub/Web/public/Main.html -->
<html lang="zh-Hant">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title>è»Ÿé«”æ‡‰ç”¨ä¸™ç´šä¸»ç•«é¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="./Main_files/bootstrap.min.css" rel="stylesheet">
  <link href="./Main_files/css2" rel="stylesheet">
  <link rel="stylesheet" href="Main.css">
   <script src="https://cdn.botpress.cloud/webchat/v2.4/inject.js"></script>
  <style>

    #webchat .bpWebchat {
      position: unset;
      width: 100%;
      height: 95%;
      max-height: 100%;
      max-width: 100%;      
    }

    #webchat .bpFab {
      display: none;
    }

    .card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 16px;
      margin: 8px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .unit-content-frame {
      background: #fff;
      border-radius: 8px;
      padding: 18px 24px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
    }


    .unit-btns-wrapper {
      display: flex;
      gap: 12px;
      margin: 20px 0;
    }
    .unit-btn {
      min-width: 36px;
      height: 36px;
      border: none;
      border-radius: 50%;
      background: #bbb;
      color: #fff;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      outline: none;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .unit-btn.active, .unit-btn:focus {
      background: #b75e14;
      transform: scale(1.08);
    }
    .subunit-btn {
      min-width: 72px;
      height: 36px;
      border: none;
      border-radius: 18px;
      background: #eee;
      color: #b75e14;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, transform 0.1s;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
      outline: none;
      padding: 0 18px;
      margin-right: 0;
      margin-bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .subunit-btn.active, .subunit-btn:focus {
      background: #b75e14;
      color: #fff;
      transform: scale(1.06);
    }
    /* å…¶ä»–ç¾æœ‰æ¨£å¼ä¿æŒä¸è®Š */
  </style>
</head>

<body>
  <div class="main-card">
    <!-- å´é‚Šæ¬„ -->
    <div class="sidebar">
      <div class="logo-box">
        <img src="images/3/runing_cat.gif" alt="logo" class="logo-img">
        <div class="logo-text">æ—…è¡Œä¸­</div>
      </div>
      <div class="dark-frame" style="visibility:hidden"></div>
      <button class="nav-btn" onclick="showPage('page-home')">é¦–é </button>
      <button class="nav-btn" onclick="showPage('page-courses')">æˆ‘çš„èª²ç¨‹</button>
      <button class="nav-btn" onclick="showPage('page-records')">å­¸ç¿’ç´€éŒ„</button>
      <button class="nav-btn" onclick="showPage('page-profile')">å€‹äººæª”æ¡ˆ</button>
      <div class="dark-frame"></div>
      <button class="nav-btn2"onclick="showPage('page-mission')">ä»»å‹™</button>
      <button class="nav-btn2" onclick="showPage('page-adventure')">æ—…è¡Œ</button>
      <button class="nav-btn2"onclick="showPage('page-badge')">å¾½ç« </button>
      <button class="nav-btn2">ç‰©å“åº«</button>
    </div>
    <!-- ä¸»å€å¡Šï¼šæ¨™é¡Œåˆ—+å…§å®¹ -->
    <div class="main-area">
      <div class="main-header">
        <div class="ball" style="left:-30px;"></div>
        <div class="ball" style="right:36px;"></div>
        <span class="main-title">è»Ÿé«”æ‡‰ç”¨ä¸™ç´š</span>
        <div class="right-btn-group" style="z-index: 2;">
          <button class="challenge-btn" onclick="showChallengeModal()">æŒ‘æˆ°</button>
          <button class="bell-btn">ğŸ””</button>
        </div>
      </div>
      <div class="dark-frame"
        style="margin-left: 7px; background-color: #C47323; width: 128%; z-index: 5; align-self: center;"></div>
      <div class="main-content" style="padding: 10px 40px;">
        <!-- æˆ‘çš„èª²ç¨‹ -->
        <div id="page-courses">
          <!-- ...åŸæœ¬æˆ‘çš„èª²ç¨‹å…§å®¹... -->
          <div class="lesson-list">
            <div class="lesson-card">
              <div class="lesson-title">é›»è…¦åŸºç¤æ¦‚å¿µèˆ‡æ“ä½œ</div>
              <div class="lesson-desc">ä»‹ç´¹å€‹äººé›»è…¦çš„åŸºæœ¬æ¶æ§‹èˆ‡çµ„æˆï¼ŒåŒ…å«ï¼Œæ¡Œé¢æ“ä½œã€è¼¸å…¥è¼¸å‡ºè¨­å‚™ã€æª”æ¡ˆé¡å‹ã€å¤šå·¥è™•ç†åŸºæœ¬åŠŸèƒ½ç­‰ã€‚é©åˆç„¡åŸºç¤å­¸å“¡ï¼Œå»ºç«‹ä½¿ç”¨é›»è…¦çš„åŸºæœ¬æŠ€èƒ½å’ŒçŸ¥è­˜ã€‚</div>
              <div class="lesson-meta">
                <span>â— èª²ç¨‹ åˆå­¸è€…ç´š</span>
                <button class="lesson-btn" onclick="showPage('page-lesson', 'basic-pc')">ä¸Šèª²</button>
              </div>
            </div>
            <div class="lesson-card">
              <div class="lesson-title">ä½œæ¥­ç³»çµ±èˆ‡æª”æ¡ˆç®¡ç†</div>
              <div class="lesson-desc">ä»‹ç´¹ä¸åŒä½œæ¥­ç³»çµ±çš„æ¶æ§‹èˆ‡åŠŸèƒ½ã€ä½¿ç”¨è€…æ¬Šé™ï¼Œå­¸ç¿’å¦‚ä½•ç®¡ç†æª”æ¡ˆèˆ‡è³‡æ–™å¤¾ï¼Œç†è§£æª”æ¡ˆç³»çµ±çš„é‹ä½œåŸç†ï¼Œä¸¦å¯¦å‹™æ“ä½œå¸¸ç”¨çš„æª”æ¡ˆç®¡ç†å·¥å…·ã€‚</div>
              <div class="lesson-meta">
                <span>â— èª²ç¨‹ åˆå­¸è€…è‡³æ–°æ‰‹ç´š</span>
                <button class="lesson-btn" onclick="showPage('page-lesson', 'os-file')">ä¸Šèª²</button>                          
              </div>                
            </div>
          </div>          
          <div class="progress-bar" >
            <div class="progress-bar-inner" style="width:3%"></div>
          </div>          
        </div>        
        <!-- ç­†è¨˜ -->
        <div id="page-notes" style="display:none;">
          <h2>ç­†è¨˜</h2>
          <p>é€™è£¡æ˜¯ç­†è¨˜å…§å®¹ã€‚</p>
        </div>
        <!-- é¦–é  -->
        <div id="page-home" style="display:none;">
          <h2>é¦–é </h2>
          <p>é€™è£¡æ˜¯é¦–é å…§å®¹ã€‚</p>
        </div>
        <!-- å­¸ç¿’ç´€éŒ„ -->
        <div id="page-records" style="display:none;">
          <h2>å­¸ç¿’ç´€éŒ„</h2>
          <p>é€™è£¡æ˜¯å­¸ç¿’ç´€éŒ„å…§å®¹ã€‚</p>
        </div>
        <!-- å€‹äººæª”æ¡ˆé é¢ -->
        <div id="page-profile" style="display:none;">
          <h2>å€‹äººæª”æ¡ˆ</h2>
          <p>é€™è£¡æ˜¯å€‹äººæª”æ¡ˆå…§å®¹ã€‚</p>
        </div>
        <!-- æ—…è¡Œé é¢ -->
        <div id="page-adventure" style="display:none;">
          <h2>æ—…è¡Œ</h2>
          <p>é€™è£¡æ˜¯æ—…è¡Œå…§å®¹ã€‚</p>
        </div>
        <!-- èª²å ‚ -->
        <div id="page-lesson" style="display:none;">
          <div class="lesson-header">
            <div class="lesson-text">
              <h2 id="lesson-title" style="font-size: 1.6rem; color: #FFF; letter-spacing: 2px; margin: 6px 0px;">
                èª²å ‚åç¨±</h2>
              <h4 id="lesson-desc" style="font-size: 1rem; color: #FFF; margin: 0;">èª²ç¨‹å…§å®¹æœƒé¡¯ç¤ºåœ¨é€™è£¡ã€‚</h4>
            </div>
            <div class="progrress-frame" style="position: relative;">
              <img src="images/3/Progress_Cat.png" style="width: 150%; height: 200%; z-index: 2;" alt="é€²åº¦è²“å’ª">
                <div style="position: absolute; left: 70%; transform: translateX(-50%); bottom: -42px; width: 160px; height: 48px; background: #fff; border-radius: 8px; border: 4px solid #333; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; color: #333; box-shadow: 0 2px 8px rgba(0,0,0,0.08); font-weight: bold;">
                ç›®å‰é€²åº¦ï¼š<span id="lesson-progress">0%</span>
              </div>
            </div>
          </div>
          <div id="lesson-units" class="unit-btns-wrapper"></div>
          <div class="unit-content-frame" style="background: #fff; border-radius: 8px; padding: 18px 24px; margin-bottom: 20px;">
            <h3 id="unit-title" style="color: #b75e14; font-size: 1.2rem; margin-bottom: 8px;">å–®å…ƒæ¨™é¡Œ</h3>
            <div id="unit-content" style="color: #333; font-size: 1rem;">å–®å…ƒå…§å®¹æœƒé¡¯ç¤ºåœ¨é€™è£¡ã€‚</div>
          </div>
        </div>
        <!-- ä»»å‹™é é¢ -->
        <div id="page-mission" style="display:none;">
          <h2>ä»»å‹™</h2>
          <p>é€™è£¡æ˜¯ä»»å‹™å…§å®¹ã€‚</p>
        </div>
        <!-- å¾½ç« é é¢ -->
        <div id="page-badge" style="display:none;">
          <h2>å¾½ç« </h2>
          <p>é€™è£¡æ˜¯å¾½ç« å…§å®¹ã€‚</p>
        </div>
        <!-- å…¶ä»–é é¢ä¾æ­¤é¡æ¨... -->
      </div>
    </div>
    <!-- å³å´æ¬„ -->
    <div class="rightbar">
      <button class="unit-btn1">åˆ‡æ›å–®å…ƒ</button>
      <div class="dark-frame" style="visibility:hidden; margin-left: 11px;"></div>
      <div class="section-title">ç¤¾ç¾¤</div>
      <div class="dark-frame" style="margin-left: 11px;"></div>
      <button class="group-btn disabled-btn">è¨è«–å€</button>
      <button class="nav-btn2">ä½œå“</button>
      <button class="group-btn disabled-btn">å¥½å‹</button>
      <button class="group-btn disabled-btn">æ’è¡Œæ¦œ</button>
      <button class="nav-btn2" onclick="openAIWebchat()">AIå­¸ä¼´</button>
      <div class="dark-frame" style="margin-left: 11px;"></div>
      <div class="ad">å»£å‘Š</div>
    </div>
  </div>

  <!-- æŒ‘æˆ°å°è¦–çª— Modal -->
  <div id="challenge-modal" style="display:none; position: fixed; left: 50%; top: 60%; transform: translate(-50%, 0); min-width: 320px; min-height: 120px; background: #fff; border-radius: 12px; box-shadow: 0 4px 24px rgba(0,0,0,0.18); z-index: 9999; padding: 24px 32px; text-align: center;">
    <h3 style="margin-bottom: 8px;position: absolute; top:16  px">æŒ‘æˆ°ï¼</h3>    
    <div class="progress-bar">
  <!-- æŒ‘æˆ°æ¢-->
      <div class="progress-bar-inner" style="position: relative; width:100%; top: -16px; " >
      <p style="position: relative; top: -0px; z-index: 2;color: #fff;left: -25%;">å®Œæˆä¸€å€‹èª²ç¨‹ã€‚</p>
      </div>
    </div>
    <div class="progress-bar" style="margin-top:auto; ">
  <!-- æŒ‘æˆ°æ¢-->
      <div class="progress-bar-inner" style="position: relative; width:100%; top: -16px;" >
      <p style="position: relative; top: -0px; z-index: 2;color: #fff;left: -25%;">å®Œæˆä¸‰å€‹èª²ç¨‹ã€‚</p>
      </div>
    </div>
    <button onclick="closeChallengeModal()" style="margin-top: 0px;" class="lesson-btn">é—œé–‰</button>
  </div>
    <!-- AIå­¸ä¼´  -->
  <div id="webchat" style="z-index: 2; position:absolute; bottom: 0%; right:0dvi; width: 300px; height: 400px; display: none;"></div>
  <script>
    const lessons = {
      'basic-pc': {
        title: 'é›»è…¦åŸºç¤æ¦‚å¿µèˆ‡æ“ä½œ',
        desc: 'ä»‹ç´¹å€‹äººé›»è…¦çš„åŸºæœ¬æ¶æ§‹èˆ‡çµ„æˆï¼ŒåŒ…å«æ¡Œé¢æ“ä½œã€è¼¸å…¥è¼¸å‡ºè¨­å‚™ã€æª”æ¡ˆé¡å‹ã€è³‡æ–™å‚³è¼¸é€Ÿåº¦åŸºæœ¬åŠŸèƒ½ç­‰ã€‚é©åˆç„¡åŸºç¤å­¸å“¡ï¼Œå»ºç«‹ä½¿ç”¨é›»è…¦çš„åŸºæœ¬æŠ€èƒ½å’ŒçŸ¥è­˜ã€‚',
        units: [
          { 
            title: 'å–®å…ƒä¸€ï¼šé›»è…¦çš„çµ„æˆ', 
            content: `
              <div>
                <div style="margin-bottom:16px; display: flex; gap: 12px; flex-wrap: wrap;">
                  <button class="subunit-btn" id="subunit-btn-0" onclick="showSubUnit(0)">ä¸»æ©Ÿ</button>
                  <button class="subunit-btn" id="subunit-btn-1" onclick="showSubUnit(1)">è¢å¹•</button>
                  <button class="subunit-btn" id="subunit-btn-2" onclick="showSubUnit(2)">éµç›¤</button>
                  <button class="subunit-btn" id="subunit-btn-3" onclick="showSubUnit(3)">æ»‘é¼ </button>
                  <button class="subunit-btn" id="subunit-btn-4" onclick="showSubUnit(4)">äº’å‹•è¡¨æ ¼</button>
                </div>
                <div id="subunit-content"></div>
              </div>
            `
          },
          { title: 'å–®å…ƒäºŒï¼šæ¡Œé¢æ“ä½œ', content: 'å­¸ç¿’å¦‚ä½•æ“ä½œæ¡Œé¢ã€é–‹å•Ÿç¨‹å¼ã€ç®¡ç†è¦–çª—ã€‚' },
          { title: 'å–®å…ƒä¸‰ï¼šè¼¸å…¥è¼¸å‡ºè¨­å‚™', content: 'èªè­˜å„ç¨®è¼¸å…¥èˆ‡è¼¸å‡ºè¨­å‚™ï¼Œä¾‹å¦‚æ»‘é¼ ã€éµç›¤ã€å°è¡¨æ©Ÿã€è¢å¹•ç­‰ã€‚' },
          { title: 'å–®å…ƒå››ï¼šæª”æ¡ˆé¡å‹', content: 'äº†è§£å¸¸è¦‹çš„æª”æ¡ˆé¡å‹èˆ‡å‰¯æª”åï¼Œå¦‚ä½•è¾¨è­˜èˆ‡ç®¡ç†ã€‚' },
          { title: 'å–®å…ƒäº”ï¼šå¤šå·¥è™•ç†', content: 'ä»‹ç´¹å¤šå·¥è™•ç†çš„åŸºæœ¬æ¦‚å¿µèˆ‡åœ¨ä½œæ¥­ç³»çµ±ä¸­çš„æ‡‰ç”¨ã€‚' },
          { title: 'å–®å…ƒå…­ï¼šè³‡æ–™å‚³è¼¸é€Ÿåº¦', content: 'èªªæ˜è³‡æ–™å‚³è¼¸é€Ÿåº¦çš„å–®ä½èˆ‡å½±éŸ¿å› ç´ ã€‚' },
          { title: 'å–®å…ƒä¸ƒï¼šé›»è…¦å®‰å…¨', content: 'åŸºç¤é›»è…¦å®‰å…¨çŸ¥è­˜èˆ‡é˜²è­·æªæ–½ã€‚' },
          { title: 'å–®å…ƒå…«ï¼šè»Ÿé«”å®‰è£', content: 'å­¸ç¿’å¦‚ä½•å®‰è£èˆ‡ç§»é™¤æ‡‰ç”¨ç¨‹å¼ã€‚' },
          { title: 'å–®å…ƒä¹ï¼šç¶²è·¯åŸºç¤', content: 'ç°¡ä»‹ç¶²è·¯é€£ç·šèˆ‡ç¶²è·¯è¨­å®šã€‚' },
          { title: 'å–®å…ƒåï¼šå¸¸è¦‹å•é¡Œæ’è§£', content: 'é‡åˆ°é›»è…¦å•é¡Œæ™‚çš„åŸºæœ¬æ’è§£æ–¹æ³•ã€‚' }
        ]
      },
      'os-file': {
        title: 'ä½œæ¥­ç³»çµ±èˆ‡æª”æ¡ˆç®¡ç†',
        desc: 'ä»‹ç´¹ä¸åŒä½œæ¥­ç³»çµ±çš„æ¶æ§‹èˆ‡åŠŸèƒ½ã€ä½¿ç”¨è€…æ¬Šé™ï¼Œå­¸ç¿’å¦‚ä½•ç®¡ç†æª”æ¡ˆèˆ‡è³‡æ–™å¤¾ï¼Œç†è§£æª”æ¡ˆç³»çµ±çš„é‹ä½œåŸç†ï¼Œä¸¦å¯¦å‹™æ“ä½œå¸¸ç”¨çš„æª”æ¡ˆç®¡ç†å·¥å…·ã€‚',
        units: [
          { title: 'å–®å…ƒä¸€ï¼šä½œæ¥­ç³»çµ±ä»‹ç´¹', content: 'æœ¬å–®å…ƒèªªæ˜ä½œæ¥­ç³»çµ±çš„ç¨®é¡èˆ‡åŸºæœ¬åŠŸèƒ½ã€‚' },
          { title: 'å–®å…ƒäºŒï¼šæª”æ¡ˆèˆ‡è³‡æ–™å¤¾ç®¡ç†', content: 'å­¸ç¿’å¦‚ä½•å»ºç«‹ã€åˆªé™¤ã€ç§»å‹•æª”æ¡ˆèˆ‡è³‡æ–™å¤¾ã€‚' },
          { title: 'å–®å…ƒä¸‰ï¼šä½¿ç”¨è€…æ¬Šé™', content: 'äº†è§£ä½œæ¥­ç³»çµ±ä¸­çš„ä½¿ç”¨è€…æ¬Šé™èˆ‡å®‰å…¨æ€§è¨­å®šã€‚' },
          { title: 'å–®å…ƒå››ï¼šæª”æ¡ˆç³»çµ±åŸç†', content: 'èªè­˜æª”æ¡ˆç³»çµ±çš„é‹ä½œæ–¹å¼èˆ‡å¸¸è¦‹æ ¼å¼ã€‚' },
          { title: 'å–®å…ƒäº”ï¼šå¯¦ç”¨æª”æ¡ˆç®¡ç†å·¥å…·', content: 'ä»‹ç´¹å¸¸ç”¨çš„æª”æ¡ˆç®¡ç†å·¥å…·èˆ‡æ“ä½œæŠ€å·§ã€‚' },
          { title: 'å–®å…ƒå…­ï¼šå‚™ä»½èˆ‡é‚„åŸ', content: 'å­¸ç¿’å¦‚ä½•å‚™ä»½èˆ‡é‚„åŸæª”æ¡ˆã€‚' },
          { title: 'å–®å…ƒä¸ƒï¼šç£ç¢Ÿç®¡ç†', content: 'ç£ç¢Ÿåˆ†å‰²ã€æ ¼å¼åŒ–èˆ‡ç®¡ç†ã€‚' },
          { title: 'å–®å…ƒå…«ï¼šç³»çµ±è¨­å®š', content: 'ä½œæ¥­ç³»çµ±å¸¸è¦‹è¨­å®šèˆ‡èª¿æ•´ã€‚' },
          { title: 'å–®å…ƒä¹ï¼šè³‡æºç›£æ§', content: 'å¦‚ä½•ç›£æ§ç³»çµ±è³‡æºèˆ‡æ•ˆèƒ½ã€‚' },
          { title: 'å–®å…ƒåï¼šå¸¸è¦‹å•é¡Œæ’è§£', content: 'ä½œæ¥­ç³»çµ±èˆ‡æª”æ¡ˆç®¡ç†å¸¸è¦‹å•é¡Œçš„æ’è§£æ–¹æ³•ã€‚' }
        ]
      }
      // ä½ å¯ä»¥ç¹¼çºŒæ–°å¢æ›´å¤šèª²ç¨‹è³‡æ–™
    };

    function showPage(pageId, lessonId) {
      const pages = ['page-home', 'page-notes', 'page-courses', 'page-records', 'page-lesson','page-profile','page-adventure','page-mission','page-badge'];
      pages.forEach(id => {
        document.getElementById(id).style.display = (id === pageId) ? '' : 'none';
      });

      if (pageId === 'page-lesson' && lessonId && lessons[lessonId]) {
        document.getElementById('lesson-title').textContent = lessons[lessonId].title;
        document.getElementById('lesson-desc').textContent = lessons[lessonId].desc;
        // å‹•æ…‹ç”¢ç”Ÿå–®å…ƒå°æŒ‰éˆ•ï¼ˆåƒ…é¡¯ç¤ºä¸€ã€äºŒã€ä¸‰...ï¼‰
        const numToZh = ['ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹','å'];
        let unitListHtml = '';
        lessons[lessonId].units.forEach((unit, idx) => {
          const zh = numToZh[idx] || (idx+1);
          unitListHtml += `<button class="unit-btn" id="unit-btn-${idx}" onclick="showUnit('${lessonId}', ${idx})">${zh}</button>`;
        });
        document.getElementById('lesson-units').innerHTML = unitListHtml;
        // é è¨­é¡¯ç¤ºç¬¬ä¸€å€‹å–®å…ƒå…§å®¹ä¸¦é«˜äº®
        showUnit(lessonId, 0);
      }
    }
    // é¡¯ç¤ºå–®å…ƒå…§å®¹
    function showUnit(lessonId, unitIdx) {
      const unit = lessons[lessonId].units[unitIdx];
      document.getElementById('unit-title').textContent = unit.title;
      // åˆ¤æ–·æ˜¯å¦ç‚º"å–®å…ƒä¸€ï¼šé›»è…¦çš„çµ„æˆ"
      if (unit.title.indexOf('é›»è…¦çš„çµ„æˆ') !== -1) {
        document.getElementById('unit-content').innerHTML = unit.content;
        showSubUnit(0); // é è¨­é¡¯ç¤ºç¬¬ä¸€å€‹å­å–®å…ƒ
      } else if (unit.title.indexOf('äº’å‹•è¡¨æ ¼') !== -1) {
        document.getElementById('unit-content').innerHTML = unit.content;
        renderInteractiveTableV2();
      } else {
        document.getElementById('unit-content').textContent = unit.content;
      }
      // é«˜äº®ç›®å‰æŒ‰éˆ•
      const btns = document.querySelectorAll('.unit-btn');
      btns.forEach((btn, idx) => btn.classList.toggle('active', idx === unitIdx));
    }

    // å–®å…ƒä¸€å­å–®å…ƒå…§å®¹
    const subUnitContents = [
      // ä¸»æ©Ÿ
      `<div>
        <div id="dialogue-system" style="margin-bottom:16px;">
          <div id="dialogue-text" style="font-size:1.05em;min-height:40px;margin-bottom:12px;"></div>
          <div id="dialogue-choices" style="display:flex;gap:12px;"></div>
        </div>
        ä¸»æ©Ÿï¼šé›»è…¦çš„æ ¸å¿ƒéƒ¨ä»¶ï¼Œè² è²¬è³‡æ–™è™•ç†èˆ‡é‹ç®—ã€‚
      </div>`,
      // è¢å¹•
      `<div>
        <div id="dialogue-system" style="margin-bottom:16px;">
          <div id="dialogue-text" style="font-size:1.05em;min-height:40px;margin-bottom:12px;"></div>
          <div id="dialogue-choices" style="display:flex;gap:12px;"></div>
        </div>
        è¢å¹•ï¼šé¡¯ç¤ºé›»è…¦è¼¸å‡ºçš„è³‡è¨Šï¼Œå±¬æ–¼è¼¸å‡ºè¨­å‚™ã€‚
      </div>`,
      // éµç›¤
      `<div>
        <div id="dialogue-system" style="margin-bottom:16px;">
          <div id="dialogue-text" style="font-size:1.05em;min-height:40px;margin-bottom:12px;"></div>
          <div id="dialogue-choices" style="display:flex;gap:12px;"></div>
        </div>
        éµç›¤ï¼šå¸¸è¦‹çš„è¼¸å…¥è¨­å‚™ï¼Œç”¨æ–¼è¼¸å…¥æ–‡å­—èˆ‡æŒ‡ä»¤ã€‚
      </div>`,
      // æ»‘é¼ 
      `<div>
        <div id="dialogue-system" style="margin-bottom:16px;">
          <div id="dialogue-text" style="font-size:1.05em;min-height:40px;margin-bottom:12px;"></div>
          <div id="dialogue-choices" style="display:flex;gap:12px;"></div>
        </div>
        æ»‘é¼ ï¼šå¸¸è¦‹çš„è¼¸å…¥è¨­å‚™ï¼Œç”¨æ–¼æ§åˆ¶æ¸¸æ¨™èˆ‡æ“ä½œä»‹é¢ã€‚
      </div>`,
      // äº’å‹•è¡¨æ ¼
      `<div id="interactive-table-frame" style='margin: 4px 0;'>
        <div style="border:2px solid #b75e14; border-radius:12px; padding:4px; background:#fff;">
          <div id="dialogue-system" style="margin-bottom:4px;">
            <div id="dialogue-text" style="font-size:1.05em;min-height:40px;margin-bottom:-24px;"></div>
            <div id="dialogue-choices" style="display:flex;gap:4px;"></div>
          </div>
          <div id="drag-table-container"></div>
          <div style="margin-top:8px;">
            <span style="font-size:0.95em;color:#888;">æç¤ºï¼šæ‹–æ›³ä¸‹æ–¹è£ç½®åˆ°æ­£ç¢ºåˆ†é¡æ¡†ä¸­ã€‚</span>
          </div>
        </div>
      </div>`
    ];

    function showSubUnit(idx) {
      const sub = document.getElementById('subunit-content');
      if (!sub) return;
      sub.innerHTML = subUnitContents[idx];
      // é«˜äº®ç›®å‰å­å–®å…ƒæŒ‰éˆ•
      for (let i = 0; i < 5; i++) {
        const btn = document.getElementById('subunit-btn-' + i);
        if (btn) btn.classList.toggle('active', i === idx);
      }
      // å°è©±å¼•å°
      renderDialogueSystemForSubunit(idx);
      if (idx === 4) renderInteractiveTableV2();
    }

    // å°è©±é¸æ“‡ç³»çµ± for å–®å…ƒä¸€å­å–®å…ƒ
    function renderDialogueSystemForSubunit(idx) {
      const dialogueSets = [
        // ä¸»æ©Ÿ
        [
          {
            text: "æ­¡è¿é€²å…¥é›»è…¦çš„çµ„æˆä»‹ç´¹ã€‚ä½ çŸ¥é“ä¸»æ©Ÿçš„ä¸»è¦åŠŸèƒ½æ˜¯ä»€éº¼å—ï¼Ÿ",
            choices: [
              { text: "è³‡æ–™è™•ç†èˆ‡é‹ç®—", next: 1 },
              { text: "é¡¯ç¤ºç•«é¢", next: 2 }
            ]
          },
          {
            text: "ç­”å°äº†ï¼ä¸»æ©Ÿè² è²¬è³‡æ–™è™•ç†èˆ‡é‹ç®—ã€‚ä¸‹ä¸€æ­¥ï¼Œä¾†çœ‹çœ‹è¢å¹•ã€‚",
            choices: [
              { text: "å‰å¾€è¢å¹•", action: () => showSubUnit(1) }
            ]
          },
          {
            text: "ä¸»æ©Ÿä¸»è¦è² è²¬è³‡æ–™è™•ç†èˆ‡é‹ç®—ï¼Œé¡¯ç¤ºç•«é¢æ˜¯è¢å¹•çš„åŠŸèƒ½å–”ï¼",
            choices: [
              { text: "å†è©¦ä¸€æ¬¡", next: 0 }
            ]
          }
        ],
        // è¢å¹•
        [
          {
            text: "è¢å¹•å±¬æ–¼å“ªä¸€é¡è¨­å‚™ï¼Ÿ",
            choices: [
              { text: "è¼¸å…¥è¨­å‚™", next: 2 },
              { text: "è¼¸å‡ºè¨­å‚™", next: 1 }
            ]
          },
          {
            text: "æ­£ç¢ºï¼è¢å¹•æ˜¯è¼¸å‡ºè¨­å‚™ã€‚æ¥ä¸‹ä¾†èªè­˜éµç›¤ã€‚",
            choices: [
              { text: "å‰å¾€éµç›¤", action: () => showSubUnit(2) }
            ]
          },
          {
            text: "è¢å¹•æ˜¯è¼¸å‡ºè¨­å‚™ï¼Œè² è²¬é¡¯ç¤ºè³‡è¨Šã€‚",
            choices: [
              { text: "å†è©¦ä¸€æ¬¡", next: 0 }
            ]
          }
        ],
        // éµç›¤
        [
          {
            text: "éµç›¤çš„ä¸»è¦ç”¨é€”æ˜¯ï¼Ÿ",
            choices: [
              { text: "è¼¸å…¥æ–‡å­—èˆ‡æŒ‡ä»¤", next: 1 },
              { text: "æ’­æ”¾éŸ³æ¨‚", next: 2 }
            ]
          },
          {
            text: "ç­”å°äº†ï¼éµç›¤æ˜¯å¸¸è¦‹çš„è¼¸å…¥è¨­å‚™ã€‚æ¥ä¸‹ä¾†çœ‹çœ‹æ»‘é¼ ã€‚",
            choices: [
              { text: "å‰å¾€æ»‘é¼ ", action: () => showSubUnit(3) }
            ]
          },
          {
            text: "éµç›¤ä¸»è¦ç”¨æ–¼è¼¸å…¥æ–‡å­—èˆ‡æŒ‡ä»¤ï¼Œæ’­æ”¾éŸ³æ¨‚æ˜¯å…¶ä»–è¨­å‚™çš„åŠŸèƒ½ã€‚",
            choices: [
              { text: "å†è©¦ä¸€æ¬¡", next: 0 }
            ]
          }
        ],
        // æ»‘é¼ 
        [
          {
            text: "æ»‘é¼ å±¬æ–¼å“ªä¸€é¡è¨­å‚™ï¼Ÿ",
            choices: [
              { text: "è¼¸å…¥è¨­å‚™", next: 1 },
              { text: "è¼¸å‡ºè¨­å‚™", next: 2 }
            ]
          },
          {
            text: "æ­£ç¢ºï¼æ»‘é¼ æ˜¯è¼¸å…¥è¨­å‚™ã€‚æœ€å¾Œä¾†æŒ‘æˆ°äº’å‹•è¡¨æ ¼å§ï¼",
            choices: [
              { text: "å‰å¾€äº’å‹•è¡¨æ ¼", action: () => showSubUnit(4) }
            ]
          },
          {
            text: "æ»‘é¼ æ˜¯è¼¸å…¥è¨­å‚™ï¼Œè«‹å†è©¦ä¸€æ¬¡ï¼",
            choices: [
              { text: "å†è©¦ä¸€æ¬¡", next: 0 }
            ]
          }
        ]
      ];

      const dialogue = dialogueSets[idx];
      if (!dialogue) {
        // æ²’æœ‰å°è©±å…§å®¹æ™‚ï¼Œå°‡ dialogue-system çš„ margin-bottom è¨­ç‚º 0
        const sys = document.getElementById('dialogue-system');
        if (sys) sys.style.marginBottom = '0';
        return;
      }
      const textDiv = document.getElementById('dialogue-text');
      const choicesDiv = document.getElementById('dialogue-choices');
      let dialogueIdx = 0;

      function renderDialogue(idx) {
        const node = dialogue[idx];
        textDiv.textContent = node.text;
        choicesDiv.innerHTML = '';
        node.choices.forEach(choice => {
          const btn = document.createElement('button');
          btn.textContent = choice.text;
          btn.className = 'subunit-btn';
          btn.onclick = () => {
            if (typeof choice.action === 'function') {
              choice.action();
            } else if (typeof choice.next === 'number') {
              renderDialogue(choice.next);
            }
          };
          choicesDiv.appendChild(btn);
        });
      }
      renderDialogue(dialogueIdx);
    }
    // æ–°ç‰ˆäº’å‹•å¼è¡¨æ ¼JS
    function renderInteractiveTableV2() {
      const container = document.getElementById('drag-table-container');
      if (!container) return;
      container.innerHTML = `
        <div style="display: flex; align-items: flex-start; gap: 24px; position: relative; margin-top:0; padding-top:0;">
          <div id="table-frame-move" style="display:inline-block; border:2px dashed #b75e14; border-radius:10px; padding:12px; background:#fff; cursor:move; margin-top:0;">
            <table style="border-collapse:collapse;width:100%;max-width:420px;margin-top:0;">
              <tr>
            <th style="border:1px solid #b75e14;padding:8px 12px;background:#ffe5c2;">æ»‘é¼ </th>
            <th style="border:1px solid #b75e14;padding:8px 12px;background:#ffe5c2;">éµç›¤</th>
            <th style="border:1px solid #b75e14;padding:8px 12px;background:#e7eaff;">è¢å¹•</th>
            <th style="border:1px solid #b75e14;padding:8px 12px;background:#e7eaff;">å–‡å­</th>
              </tr>
              <tr>
            <td id="frame-mouse" class="drop-frame" style="border:1px solid #b75e14;height:60px;min-width:80px;"></td>
            <td id="frame-keyboard" class="drop-frame" style="border:1px solid #b75e14;height:60px;min-width:80px;"></td>
            <td id="frame-screen" class="drop-frame" style="border:1px solid #b75e14;height:60px;min-width:80px;"></td>
            <td id="frame-speaker" class="drop-frame" style="border:1px solid #b75e14;height:60px;min-width:80px;"></td>
              </tr>
              <tr>
            <th style="border:1px solid #b75e14;padding:8px 12px;background:#e7f7e7;" colspan="2">è¼¸å…¥è¨­å‚™</th>
            <th style="border:1px solid #b75e14;padding:8px 12px;background:#f7e7e7;" colspan="2">è¼¸å‡ºè¨­å‚™</th>
              </tr>
              <tr>
            <td id="frame-input" class="drop-frame" colspan="2" style="border:1px solid #b75e14;height:60px;"></td>
            <td id="frame-output" class="drop-frame" colspan="2" style="border:1px solid #b75e14;height:60px;"></td>
              </tr>
            </table>
            </div>
            <div style="display:flex;flex-direction:column;gap:4px;min-width:40px;margin-top:0;">
            <div class="draggable-cell" draggable="true" data-type="mouse" style="border:1px solid #888;padding:6px 8px;border-radius:8px;cursor:grab;background:#f7f7f7;min-width:40px;text-align:center;">æ»‘é¼ </div>
            <div class="draggable-cell" draggable="true" data-type="keyboard" style="border:1px solid #888;padding:6px 8px;border-radius:8px;cursor:grab;background:#f7f7f7;min-width:40px;text-align:center;">éµç›¤</div>
            <div class="draggable-cell" draggable="true" data-type="input" style="border:1px solid #888;padding:6px 8px;border-radius:8px;cursor:grab;background:#f7f7f7;min-width:40px;text-align:center;">è¼¸å…¥è¨­å‚™</div>
            <div class="draggable-cell" draggable="true" data-type="screen" style="border:1px solid #888;padding:6px 8px;border-radius:8px;cursor:grab;background:#f7f7f7;min-width:40px;text-align:center;">è¢å¹•</div>
            <div class="draggable-cell" draggable="true" data-type="speaker" style="border:1px solid #888;padding:6px 8px;border-radius:8px;cursor:grab;background:#f7f7f7;min-width:40px;text-align:center;">å–‡å­</div>
            <div class="draggable-cell" draggable="true" data-type="output" style="border:1px solid #888;padding:6px 8px;border-radius:8px;cursor:grab;background:#f7f7f7;min-width:40px;text-align:center;">è¼¸å‡ºè¨­å‚™</div>
            </div>
          </div>
        </div>
      `;

      // æ‹–æ‹‰äº‹ä»¶
      container.querySelectorAll('.draggable-cell').forEach(cell => {
        cell.addEventListener('dragstart', e => {
          e.dataTransfer.setData('text/plain', cell.outerHTML);
          setTimeout(() => cell.style.visibility = 'hidden', 0);
        });
        cell.addEventListener('dragend', e => {
          cell.style.visibility = '';
        });
      });

      container.querySelectorAll('.drop-frame').forEach(frame => {
        frame.addEventListener('dragover', e => {
          e.preventDefault();
          frame.style.background = '#fffbe6';
        });
        frame.addEventListener('dragleave', e => {
          frame.style.background = '';
        });
        frame.addEventListener('drop', e => {
          e.preventDefault();
          frame.style.background = '';
          const html = e.dataTransfer.getData('text/plain');
          if (html) {
            // åƒ…å…è¨±ä¸€å€‹cell
            frame.innerHTML = html;
            // é‡æ–°æ›è¼‰æ‹–æ‹‰äº‹ä»¶
            const dropped = frame.querySelector('.draggable-cell');
            if (dropped) {
              dropped.addEventListener('dragstart', ev => {
                ev.dataTransfer.setData('text/plain', dropped.outerHTML);
                setTimeout(() => dropped.style.visibility = 'hidden', 0);
              });
              dropped.addEventListener('dragend', ev => {
                dropped.style.visibility = '';
              });
            }
          }
        });
      });

      // è®“æ•´å€‹è¡¨æ ¼æ¡†å¯ç§»å‹•
      const tableFrame = document.getElementById('table-frame-move');
      let isDragging = false, startX = 0, startY = 0, origX = 0, origY = 0;
      tableFrame.addEventListener('mousedown', function(e) {
        if (e.target !== tableFrame) return;
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        const rect = tableFrame.getBoundingClientRect();
        origX = rect.left;
        origY = rect.top;
        tableFrame.style.position = 'fixed';
        tableFrame.style.zIndex = 99;
        document.body.style.userSelect = 'none';
      });
      document.addEventListener('mousemove', function(e) {
        if (!isDragging) return;
        tableFrame.style.left = (origX + e.clientX - startX) + 'px';
        tableFrame.style.top = (origY + e.clientY - startY) + 'px';
      });
      document.addEventListener('mouseup', function() {
        if (isDragging) {
          isDragging = false;
          document.body.style.userSelect = '';
        }
      });
    }
  </script>
  <!-- Botpress åˆå§‹åŒ–è…³æœ¬ç§»åˆ°é€™è£¡ -->
  <script>
    window.botpress.on("webchat:ready", () => {
      window.botpress.open();
    });
    window.botpress.init({
      "botId": "8db1604b-6b48-4919-9a5c-4b3eb23948a4",
      "configuration": {
        "botName": "AIå°è€å¸«",
        "botAvatar": "https://files.bpcontent.cloud/2025/05/20/06/20250520062614-9U6T9BFK.png",
        "fabImage": "https://files.bpcontent.cloud/2025/05/20/06/20250520062438-1O49HB49.png",
        "website": {},
        "email": {},
        "phone": {},
        "termsOfService": {},
        "privacyPolicy": {},
        "color": "#b75e14",
        "variant": "soft",
        "themeMode": "light",
        "fontFamily": "ibm",
        "radius": 3,
        "additionalStylesheetUrl": "https://files.bpcontent.cloud/2025/05/20/06/20250520062811-KX8CLOG6.css"
      },
      "clientId": "51db9fc7-e92e-41f3-a0e2-d4105907deab",
      "selector": "#webchat"
    });
  </script>
</body>
</html>